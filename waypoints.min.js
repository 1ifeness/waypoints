// Generated by CoffeeScript 1.3.3
/*
jQuery Waypoints - v2.0.0
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},g=[].slice;e=window.jQuery,t=e(window),i={horizontal:{},vertical:{}},s=1,u={},o="waypoints-context-id",l="resize.waypoints",c="scroll.waypoints",h=1,p="waypoints-waypoint-ids",d="waypoint",v="waypoints",n=function(){function t(t){var n=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+s++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},t.data(o,this.id),u[this.id]=this,t.bind(c,function(){var t;if(!n.didScroll)return n.didScroll=!0,t=function(){return n.doScroll(),n.didScroll=!1},window.setTimeout(t,e[v].settings.scrollThrottle)}),t.bind(l,function(){var t;if(!n.didResize)return n.didResize=!0,t=function(){return e[v]("refresh"),n.didResize=!1},window.setTimeout(t,e[v].settings.resizeThrottle)})}return t.prototype.doScroll=function(){var t,n=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},m.call(window,"ontouchstart")>=0&&(!t.vertical.oldScroll||!t.vertical.newScroll)&&e[v]("refresh"),e.each(t,function(t,r){var i,s,o;return o=[],s=r.newScroll>r.oldScroll,i=s?r.forward:r.backward,e.each(n.waypoints[t],function(e,t){var n,i;if(r.oldScroll<(n=t.offset)&&n<=r.newScroll)return o.push(t);if(r.newScroll<(i=t.offset)&&i<=r.oldScroll)return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),s||o.reverse(),e.each(o,function(e,t){if(t.options.continuous||e===o.length-1)return t.trigger([i])})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,n,r,i=this;return r=e.isWindow(this.element),n=this.$element.offset(),t={horizontal:{contextOffset:r?0:n.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:n.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?e[v]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},e.each(t,function(t,n){return e.each(i.waypoints[t],function(t,r){var i,s,o,u,a;i=r.options.offset,o=r.offset,s=e.isWindow(r.element)?0:r.$element.offset()[n.offsetProp],e.isFunction(i)?i=i.apply(r.element):typeof i=="string"&&(i=parseFloat(i),r.options.offset.indexOf("%")&&(i=Math.ceil(n.contextDimension*i/100))),r.offset=s-n.contextOffset+n.contextScroll-i;if(r.options.onlyOnScroll&&o!=null||!r.enabled)return;if(o!==null&&o<(u=n.oldScroll)&&u<=r.offset)return r.trigger([n.backward]);if(o!==null&&o>(a=n.oldScroll)&&a>=r.offset)return r.trigger([n.forward]);if(o===null&&n.oldScroll>=r.offset)return r.trigger([n.forward])})})},t.prototype.checkEmpty=function(){if(e.isEmptyObject(this.waypoints.horizontal&&e.isEmptyObject(this.waypoints.vertical)))return this.$element.unbind([l,c].join(" ")),delete u[this.id]},t}(),r=function(){function t(t,n,r){var s,o;r=e.extend({},e.fn[d].defaults,r),r.offset==="bottom-in-view"&&(r.offset=function(){var t;return t=e[v]("viewportHeight"),e.isWindow(n.element)||(t=n.$element.height()),t-e(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=n,this.enabled=r.enabled,this.id="waypoints"+h++,this.offset=null,this.options=r,n.waypoints[this.axis][this.id]=this,i[this.axis][this.id]=this,s=(o=t.data(p))!=null?o:[],s.push(this.id),t.data(p,s)}return t.prototype.trigger=function(e){if(!this.enabled)return;this.callback!=null&&this.callback.apply(this.element,e);if(this.options.triggerOnce)return this.destroy()},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete i[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var n,r;return r=e(t).data(p),r?(n=e.extend({},i.horizontal,i.vertical),e.map(r,function(e){return n[e]})):[]},t}(),f={init:function(t,i){var s;return i==null&&(i={}),(s=i.handler)==null&&(i.handler=t),this.each(function(){var t,s,a,f;return t=e(this),a=(f=i.context)!=null?f:e.fn[d].defaults.context,e.isWindow(a)||(a=t.closest(a)),a=e(a),s=u[a.data(o)],s||(s=new n(a)),new r(t,s,i)}),e[v]("refresh"),this},disable:function(){return f._invoke(this,"disable")},enable:function(){return f._invoke(this,"enable")},destroy:function(){return f._invoke(this,"destroy")},prev:function(e,t){return f._traverse.call(this,e,t,function(e,t,n){if(t>0)return e.push(n[t-1])})},next:function(e,t){return f._traverse.call(this,e,t,function(e,t,n){if(t<n.length-1)return e.push(n[t+1])})},_traverse:function(t,n,r){var i,s;return t==null&&(t="vertical"),n==null&&(n=window),s=a.aggregate(n),i=[],this.each(function(){var n;return n=e.inArray(this,s[t]),r(i,n,s[t])}),this.pushStack(i)},_invoke:function(t,n){return t.each(function(){var t;return t=r.getWaypointsByElement(this),e.each(t,function(e,t){return t[n](),!0})}),this}},e.fn[d]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?g.call(arguments,1):[],f[n]?f[n].apply(this,t):e.isFunction(n)?f.init.apply(this,arguments):e.isPlainObject(n)?f.init.apply(this,[null,n]):n?e.error("The "+n+" method does not exist in jQuery Waypoints."):e.error("jQuery Waypoints needs a callback function or handler option.")},e.fn[d].defaults={context:window,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},a={refresh:function(){return e.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return(e=window.innerHeight)!=null?e:t.height()},aggregate:function(t){var n,r;return n=i,t&&(n=u[e(t).data(o)].waypoints),r={horizontal:[],vertical:[]},e.each(r,function(t,i){return e.each(n[t],function(e,t){return i.push(t)}),i.sort(function(e,t){return e.offset-t.offset}),r[t]=e.map(i,function(e){return e.element}),r[t]=e.unique(r[t])}),r},above:function(e){return e==null&&(e=window),a._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return e==null&&(e=window),a._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return e==null&&(e=window),a._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return e==null&&(e=window),a._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return a._invoke("enable")},disable:function(){return a._invoke("disable")},destroy:function(){return a._invoke("destroy")},_invoke:function(t){var n;return n=e.extend({},i.vertical,i.horizontal),e.each(n,function(e,n){return n[t](),!0})},_filter:function(t,n,r){var i,s;return i=u[e(t).data(o)],i?(s=[],e.each(i.waypoints[n],function(e,t){if(r(i,t))return s.push(t)}),s.sort(function(e,t){return e.offset-t.offset}),e.map(s,function(e){return e.element})):[]}},e[v]=function(){var e,t;return t=arguments[0],e=2<=arguments.length?g.call(arguments,1):[],a[t]?a[t]():a.aggregate.apply(null,e)},e[v].settings={resizeThrottle:200,scrollThrottle:100},t.load(function(){return e[v]("refresh")})}).call(this);